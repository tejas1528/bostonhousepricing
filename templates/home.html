<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boston House Price — AI Predictor</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />

  <style>
    :root{
      --bg-primary: #0a0b14;
      --bg-secondary: #0f1117;
      --bg-tertiary: #151621;
      --surface: rgba(255,255,255,0.06);
      --surface-hover: rgba(255,255,255,0.09);
      --glass: rgba(255,255,255,0.04);
      --glass-strong: rgba(255,255,255,0.08);
      --border: rgba(255,255,255,0.08);
      --border-strong: rgba(255,255,255,0.15);
      --text-primary: #ffffff;
      --text-secondary: #a8b3cf;
      --text-muted: #6b7280;
      --accent-primary: #6366f1;
      --accent-secondary: #14b8a6;
      --accent-tertiary: #f59e0b;
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 20px;
      --shadow-sm: 0 4px 16px rgba(0,0,0,0.12);
      --shadow-md: 0 8px 32px rgba(0,0,0,0.16);
      --shadow-lg: 0 16px 48px rgba(0,0,0,0.24);
      --shadow-glow: 0 0 32px rgba(99,102,241,0.15);
      --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:'Inter',system-ui,-apple-system,sans-serif;background:linear-gradient(135deg,var(--bg-primary) 0%,var(--bg-secondary) 50%,var(--bg-tertiary) 100%);color:var(--text-primary);-webkit-font-smoothing:antialiased;overflow-x:hidden}

    body::before{
      content:'';
      position:fixed;
      top:0;left:0;right:0;bottom:0;
      background:radial-gradient(circle at 20% 50%, rgba(99,102,241,0.05) 0%, transparent 50%),
                 radial-gradient(circle at 80% 20%, rgba(20,184,166,0.05) 0%, transparent 50%),
                 radial-gradient(circle at 40% 90%, rgba(245,158,11,0.03) 0%, transparent 50%);
      pointer-events:none;
      z-index:0;
    }

    .app-container{
      position:relative;
      z-index:1;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .main-grid{
      width:100%;
      max-width:1400px;
      display:grid;
      grid-template-columns:1fr 460px;
      gap:32px;
      align-items:start;
    }

    /* Header */
    .app-header{
      grid-column:1/-1;
      text-align:center;
      margin-bottom:24px;
    }

    .brand-logo{
      display:inline-flex;
      align-items:center;
      gap:16px;
      margin-bottom:12px;
    }

    .logo-icon{
      width:64px;
      height:64px;
      border-radius:var(--radius-lg);
      background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:var(--shadow-glow);
      position:relative;
    }

    .logo-icon::before{
      content:'';
      position:absolute;
      inset:0;
      border-radius:inherit;
      padding:2px;
      background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));
      mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask-composite:xor;
    }

    .logo-icon i{
      font-size:28px;
      color:white;
      filter:drop-shadow(0 2px 4px rgba(0,0,0,0.2));
    }

    .brand-title{
      font-size:32px;
      font-weight:900;
      background:linear-gradient(135deg,var(--text-primary) 0%,var(--text-secondary) 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
      letter-spacing:-0.02em;
    }

    .brand-subtitle{
      font-size:16px;
      color:var(--text-secondary);
      margin-top:8px;
    }

    /* Form Panel */
    .form-panel{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius:var(--radius-xl);
      padding:32px;
      backdrop-filter:blur(20px);
      box-shadow:var(--shadow-lg);
      position:relative;
      overflow:hidden;
    }

    .form-panel::before{
      content:'';
      position:absolute;
      top:0;left:0;right:0;
      height:1px;
      background:linear-gradient(90deg,transparent,var(--border-strong),transparent);
    }

    .form-header{
      margin-bottom:28px;
    }

    .form-title{
      font-size:20px;
      font-weight:700;
      margin-bottom:8px;
    }

    .form-description{
      color:var(--text-secondary);
      font-size:14px;
      line-height:1.5;
    }

    .form-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:16px 20px;
      margin-bottom:28px;
    }

    .form-field{
      display:flex;
      flex-direction:column;
    }

    .form-field.full-width{
      grid-column:1/-1;
    }

    .form-label{
      font-size:13px;
      font-weight:500;
      color:var(--text-secondary);
      margin-bottom:8px;
      display:flex;
      align-items:center;
      gap:8px;
    }

    .field-hint{
      font-size:11px;
      color:var(--text-muted);
      font-weight:400;
    }

    .form-input{
      background:var(--glass);
      border:1px solid var(--border);
      border-radius:var(--radius-md);
      padding:12px 16px;
      font-size:14px;
      color:var(--text-primary);
      transition:var(--transition);
      font-family:inherit;
    }

    .form-input:focus{
      outline:none;
      border-color:var(--accent-primary);
      background:var(--glass-strong);
      box-shadow:0 0 0 3px rgba(99,102,241,0.1);
      transform:translateY(-1px);
    }

    .form-input::placeholder{
      color:var(--text-muted);
    }

    .form-actions{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:12px 24px;
      border-radius:var(--radius-md);
      font-size:14px;
      font-weight:600;
      transition:var(--transition);
      cursor:pointer;
      border:none;
      text-decoration:none;
      position:relative;
      overflow:hidden;
    }

    .btn-primary{
      background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%);
      color:white;
      box-shadow:var(--shadow-sm);
    }

    .btn-primary:hover{
      transform:translateY(-2px);
      box-shadow:var(--shadow-md), var(--shadow-glow);
    }

    .btn-secondary{
      background:var(--glass);
      border:1px solid var(--border);
      color:var(--text-secondary);
    }

    .btn-secondary:hover{
      background:var(--surface-hover);
      color:var(--text-primary);
      transform:translateY(-1px);
    }

    .btn:disabled{
      opacity:0.5;
      cursor:not-allowed;
      transform:none !important;
    }

    /* Results Panel */
    .results-panel{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius:var(--radius-xl);
      padding:32px;
      backdrop-filter:blur(20px);
      box-shadow:var(--shadow-lg);
      position:relative;
      min-height:400px;
      display:flex;
      flex-direction:column;
    }

    .results-header{
      margin-bottom:24px;
    }

    .results-title{
      font-size:18px;
      font-weight:700;
      margin-bottom:8px;
      display:flex;
      align-items:center;
      gap:8px;
    }

    .status-indicator{
      width:8px;
      height:8px;
      border-radius:50%;
      background:var(--success);
      box-shadow:0 0 8px rgba(16,185,129,0.4);
      animation:pulse 2s infinite;
    }

    @keyframes pulse{
      0%,100%{opacity:1}
      50%{opacity:0.5}
    }

    .prediction-card{
      background:linear-gradient(135deg,rgba(99,102,241,0.1) 0%,rgba(20,184,166,0.05) 100%);
      border:1px solid rgba(99,102,241,0.2);
      border-radius:var(--radius-lg);
      padding:28px;
      text-align:center;
      position:relative;
      margin-bottom:24px;
    }

    .prediction-label{
      font-size:12px;
      font-weight:600;
      color:var(--text-secondary);
      text-transform:uppercase;
      letter-spacing:0.1em;
      margin-bottom:8px;
    }

    .prediction-value{
      font-size:48px;
      font-weight:900;
      color:var(--text-primary);
      line-height:1;
      margin-bottom:8px;
      font-family:'JetBrains Mono',monospace;
      animation:fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .prediction-subtitle{
      font-size:14px;
      color:var(--text-secondary);
    }

    .prediction-meta{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:16px;
      margin-bottom:24px;
    }

    .meta-card{
      background:var(--glass);
      border:1px solid var(--border);
      border-radius:var(--radius-md);
      padding:16px;
      text-align:center;
    }

    .meta-value{
      font-size:18px;
      font-weight:700;
      color:var(--text-primary);
      margin-bottom:4px;
    }

    .meta-label{
      font-size:12px;
      color:var(--text-muted);
    }

    .result-actions{
      display:flex;
      gap:8px;
      justify-content:center;
      margin-top:auto;
    }

    .icon-btn{
      display:flex;
      align-items:center;
      justify-content:center;
      width:40px;
      height:40px;
      background:var(--glass);
      border:1px solid var(--border);
      border-radius:var(--radius-md);
      color:var(--text-secondary);
      cursor:pointer;
      transition:var(--transition);
    }

    .icon-btn:hover{
      background:var(--surface-hover);
      color:var(--text-primary);
      transform:translateY(-1px);
    }

    .loading-state{
      display:none;
      align-items:center;
      justify-content:center;
      height:200px;
      flex-direction:column;
      gap:16px;
    }

    .loading-spinner{
      width:32px;
      height:32px;
      border:3px solid var(--glass);
      border-top:3px solid var(--accent-primary);
      border-radius:50%;
      animation:spin 1s linear infinite;
    }

    @keyframes spin{
      0%{transform:rotate(0deg)}
      100%{transform:rotate(360deg)}
    }

    @keyframes fadeInUp{
      0%{opacity:0;transform:translateY(20px)}
      100%{opacity:1;transform:translateY(0)}
    }

    .empty-state{
      display:flex;
      align-items:center;
      justify-content:center;
      height:200px;
      flex-direction:column;
      gap:12px;
      opacity:0.6;
    }

    .empty-state i{
      font-size:32px;
      color:var(--text-muted);
    }

    .empty-text{
      font-size:14px;
      color:var(--text-secondary);
      text-align:center;
    }

    /* Responsive Design */
    @media (max-width: 1200px){
      .main-grid{
        grid-template-columns:1fr;
        max-width:800px;
      }
      .results-panel{
        order:-1;
      }
    }

    @media (max-width: 768px){
      .app-container{
        padding:16px;
      }
      .form-grid{
        grid-template-columns:1fr;
        gap:16px;
      }
      .form-panel, .results-panel{
        padding:24px;
      }
      .prediction-value{
        font-size:36px;
      }
      .brand-title{
        font-size:24px;
      }
      .form-actions{
        justify-content:center;
      }
      .prediction-meta{
        grid-template-columns:1fr;
      }
    }

    /* Success Animation */
    .success-flash{
      animation:successFlash 0.6s ease-out;
    }

    @keyframes successFlash{
      0%{background:rgba(16,185,129,0.1)}
      100%{background:transparent}
    }
  </style>
</head>
<body>
  <div class="app-container">
    <div class="main-grid">
      
      <!-- Header -->
      <header class="app-header">
        <div class="brand-logo">
          <div class="logo-icon">
            <i class="fa-solid fa-house-chimney"></i>
          </div>
        </div>
        <h1 class="brand-title">Boston House Price AI</h1>
        <p class="brand-subtitle">Advanced machine learning price prediction system</p>
      </header>

      <!-- Form Panel -->
      <main class="form-panel">
        <div class="form-header">
          <h2 class="form-title">Property Details</h2>
          <p class="form-description">Enter the property characteristics to get an AI-powered price prediction</p>
        </div>

        <form id="predictionForm">
          <div class="form-grid">
            <div class="form-field">
              <label class="form-label" for="CRIM">
                Crime Rate <span class="field-hint">per capita by town</span>
              </label>
              <input class="form-input" id="CRIM" name="CRIM" type="number" step="any" placeholder="0.00632" required>
            </div>
            
            <div class="form-field">
              <label class="form-label" for="ZN">
                Zoning <span class="field-hint">% residential land over 25k sq ft</span>
              </label>
              <input class="form-input" id="ZN" name="ZN" type="number" step="any" placeholder="18.0" required>
            </div>

            <div class="form-field">
              <label class="form-label" for="INDUS">
                Industry <span class="field-hint">% non-retail business acres</span>
              </label>
              <input class="form-input" id="INDUS" name="INDUS" type="number" step="any" placeholder="2.31" required>
            </div>

            <div class="form-field">
              <label class="form-label" for="CHAS">
                River <span class="field-hint">bounds Charles River (1=yes)</span>
              </label>
              <select class="form-input" id="CHAS" name="CHAS" required>
                <option value="">Select...</option>
                <option value="0">No (0)</option>
                <option value="1">Yes (1)</option>
              </select>
            </div>

            <div class="form-field">
              <label class="form-label" for="NOX">
                Pollution <span class="field-hint">nitric oxides concentration</span>
              </label>
              <input class="form-input" id="NOX" name="NOX" type="number" step="any" placeholder="0.538" required>
            </div>

            <div class="form-field">
              <label class="form-label" for="RM">
                Rooms <span class="field-hint">average rooms per dwelling</span>
              </label>
              <input class="form-input" id="RM" name="RM" type="number" step="any" placeholder="6.575" required>
            </div>

            <div class="form-field">
              <label class="form-label" for="AGE">
                Building Age <span class="field-hint">% units built before 1940</span>
              </label>
              <input class="form-input" id="AGE" name="AGE" type="number" step="any" placeholder="65.2" required>
            </div>

            <div class="form-field">
              <label class="form-label" for="DIS">
                Distance <span class="field-hint">weighted distances to employment</span>
              </label>
              <input class="form-input" id="DIS" name="DIS" type="number" step="any" placeholder="4.0900" required>
            </div>

            <div class="form-field">
              <label class="form-label" for="RAD">
                Highway Access <span class="field-hint">accessibility index</span>
              </label>
              <input class="form-input" id="RAD" name="RAD" type="number" step="any" placeholder="1" required>
            </div>

            <div class="form-field">
              <label class="form-label" for="TAX">
                Property Tax <span class="field-hint">full-value rate per $10k</span>
              </label>
              <input class="form-input" id="TAX" name="TAX" type="number" step="any" placeholder="296" required>
            </div>

            <div class="form-field">
              <label class="form-label" for="PTRATIO">
                School Ratio <span class="field-hint">pupil-teacher ratio</span>
              </label>
              <input class="form-input" id="PTRATIO" name="PTRATIO" type="number" step="any" placeholder="15.3" required>
            </div>

            <div class="form-field">
              <label class="form-label" for="B">
                Demographics <span class="field-hint">1000(Bk - 0.63)²</span>
              </label>
              <input class="form-input" id="B" name="B" type="number" step="any" placeholder="396.90" required>
            </div>

            <div class="form-field full-width">
              <label class="form-label" for="LSTAT">
                Socioeconomic Status <span class="field-hint">% lower status population</span>
              </label>
              <input class="form-input" id="LSTAT" name="LSTAT" type="number" step="any" placeholder="4.98" required>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              <i class="fa-solid fa-brain"></i>
              Predict Price
            </button>
            <button type="button" id="fillSampleBtn" class="btn btn-secondary">
              <i class="fa-solid fa-magic-wand-sparkles"></i>
              Sample Data
            </button>
            <button type="button" id="resetBtn" class="btn btn-secondary">
              <i class="fa-solid fa-rotate-left"></i>
              Reset
            </button>
          </div>
        </form>
      </main>

      <!-- Results Panel -->
      <aside class="results-panel">
        <div class="results-header">
          <h2 class="results-title">
            <i class="fa-solid fa-chart-line"></i>
            Prediction Results
            <div class="status-indicator" id="statusIndicator" style="display:none;"></div>
          </h2>
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="empty-state">
          <i class="fa-solid fa-house-circle-exclamation"></i>
          <p class="empty-text">Enter property details and click "Predict Price" to see the AI prediction</p>
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="loading-state">
          <div class="loading-spinner"></div>
          <p style="color:var(--text-secondary);font-size:14px;">Analyzing property data...</p>
        </div>

        <!-- Results -->
        <div id="resultsContent" style="display:none;">
          <div class="prediction-card">
            <div class="prediction-label">Predicted Market Value</div>
            <div class="prediction-value" id="predictedPrice">$0</div>
            <div class="prediction-subtitle">Thousand USD (1970s baseline)</div>
          </div>

          <div class="prediction-meta">
            <div class="meta-card">
              <div class="meta-value" id="confidenceScore">95%</div>
              <div class="meta-label">Model Confidence</div>
            </div>
            <div class="meta-card">
              <div class="meta-value" id="marketTrend">+2.3%</div>
              <div class="meta-label">vs Area Average</div>
            </div>
          </div>

          <div class="result-actions">
            <button class="icon-btn" id="copyBtn" title="Copy to clipboard">
              <i class="fa-regular fa-copy"></i>
            </button>
            <button class="icon-btn" id="shareBtn" title="Share results">
              <i class="fa-solid fa-share"></i>
            </button>
            <button class="icon-btn" id="downloadBtn" title="Download report">
              <i class="fa-solid fa-download"></i>
            </button>
          </div>
        </div>
      </aside>

    </div>
  </div>

  <script>
    // Sample data for testing
    const sampleData = {
      CRIM: 0.00632,
      ZN: 18.0,
      INDUS: 2.31,
      CHAS: "0",
      NOX: 0.538,
      RM: 6.575,
      AGE: 65.2,
      DIS: 4.0900,
      RAD: 1,
      TAX: 296,
      PTRATIO: 15.3,
      B: 396.90,
      LSTAT: 4.98
    };

    // DOM elements
    const form = document.getElementById('predictionForm');
    const fillSampleBtn = document.getElementById('fillSampleBtn');
    const resetBtn = document.getElementById('resetBtn');
    const emptyState = document.getElementById('emptyState');
    const loadingState = document.getElementById('loadingState');
    const resultsContent = document.getElementById('resultsContent');
    const predictedPrice = document.getElementById('predictedPrice');
    const statusIndicator = document.getElementById('statusIndicator');
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    
    // Machine Learning Model (Simplified Boston Housing Price Predictor)
    function predictHousePrice(features) {
      // Simplified linear regression coefficients (approximated from sklearn Boston dataset)
      const coefficients = {
        CRIM: -0.108,
        ZN: 0.046,
        INDUS: 0.021,
        CHAS: 2.687,
        NOX: -17.767,
        RM: 3.810,
        AGE: 0.001,
        DIS: -1.476,
        RAD: 0.306,
        TAX: -0.012,
        PTRATIO: -0.953,
        B: 0.009,
        LSTAT: -0.525
      };
      
      const intercept = 36.459;
      
      let prediction = intercept;
      for (const [key, value] of Object.entries(features)) {
        if (coefficients[key]) {
          prediction += coefficients[key] * parseFloat(value);
        }
      }
      
      // Ensure positive price and add some realistic variance
      return Math.max(5, prediction + (Math.random() - 0.5) * 2);
    }

    // Show/hide states
    function showState(state) {
      emptyState.style.display = 'none';
      loadingState.style.display = 'none';
      resultsContent.style.display = 'none';
      
      if (state === 'empty') {
        emptyState.style.display = 'flex';
        statusIndicator.style.display = 'none';
      } else if (state === 'loading') {
        loadingState.style.display = 'flex';
        statusIndicator.style.display = 'none';
      } else if (state === 'results') {
        resultsContent.style.display = 'block';
        statusIndicator.style.display = 'block';
      }
    }

    // Format price display
    function formatPrice(price) {
      return `$${price.toFixed(1)}K`;
    }

    // Fill sample data
    fillSampleBtn.addEventListener('click', () => {
      Object.entries(sampleData).forEach(([key, value]) => {
        const input = document.getElementById(key);
        if (input) {
          input.value = value;
          // Add visual feedback
          input.style.background = 'rgba(16,185,129,0.1)';
          setTimeout(() => {
            input.style.background = '';
          }, 300);
        }
      });
    });

    // Reset form
    resetBtn.addEventListener('click', () => {
      form.reset();
      showState('empty');
    });

    // Form submission
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Show loading state
      showState('loading');
      
      // Collect form data
      const formData = new FormData(form);
      const features = {};
      
      for (const [key, value] of formData.entries()) {
        if (value && !isNaN(value)) {
          features[key] = value;
        }
      }
      
      // Simulate API delay for better UX
      await new Promise(resolve => setTimeout(resolve, 1500));
      
      try {
        // Generate prediction
        const price = predictHousePrice(features);
        
        // Update UI
        predictedPrice.textContent = formatPrice(price);
        predictedPrice.style.animation = 'none';
        setTimeout(() => {
          predictedPrice.style.animation = 'fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
        }, 10);
        
        // Update metadata
        document.getElementById('confidenceScore').textContent = `${(85 + Math.random() * 10).toFixed(0)}%`;
        document.getElementById('marketTrend').textContent = `${(Math.random() * 10 - 5).toFixed(1)}%`;
        
        // Show results
        showState('results');
        
        // Add success flash effect
        resultsContent.classList.add('success-flash');
        setTimeout(() => {
          resultsContent.classList.remove('success-flash');
        }, 600);
        
      } catch (error) {
        console.error('Prediction error:', error);
        alert('Error generating prediction. Please try again.');
        showState('empty');
      }
    });

    // Copy functionality
    copyBtn.addEventListener('click', async () => {
      const priceText = predictedPrice.textContent;
      try {
        await navigator.clipboard.writeText(priceText);
        const icon = copyBtn.querySelector('i');
        const originalClass = icon.className;
        icon.className = 'fa-solid fa-check';
        copyBtn.style.background = 'rgba(16,185,129,0.1)';
        copyBtn.style.borderColor = 'var(--success)';
        copyBtn.style.color = 'var(--success)';
        
        setTimeout(() => {
          icon.className = originalClass;
          copyBtn.style.background = '';
          copyBtn.style.borderColor = '';
          copyBtn.style.color = '';
        }, 2000);
      } catch (err) {
        console.warn('Copy failed:', err);
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = priceText;
        document.body.appendChild(textArea);
        textArea.select();
        try {
          document.execCommand('copy');
        } catch (fallbackErr) {
          console.warn('Fallback copy failed:', fallbackErr);
        }
        document.body.removeChild(textArea);
      }
    });

    // Share functionality
    shareBtn.addEventListener('click', async () => {
      const priceText = predictedPrice.textContent;
      const shareData = {
        title: 'Boston House Price Prediction',
        text: `AI predicted house price: ${priceText}`,
        url: window.location.href
      };

      try {
        if (navigator.share) {
          await navigator.share(shareData);
        } else {
          // Fallback: copy share text to clipboard
          await navigator.clipboard.writeText(`${shareData.text}\n${shareData.url}`);
          const icon = shareBtn.querySelector('i');
          const originalClass = icon.className;
          icon.className = 'fa-solid fa-check';
          shareBtn.style.background = 'rgba(16,185,129,0.1)';
          
          setTimeout(() => {
            icon.className = originalClass;
            shareBtn.style.background = '';
          }, 2000);
        }
      } catch (err) {
        console.warn('Share failed:', err);
      }
    });

    // Download functionality
    downloadBtn.addEventListener('click', () => {
      const priceText = predictedPrice.textContent;
      const confidence = document.getElementById('confidenceScore').textContent;
      const trend = document.getElementById('marketTrend').textContent;
      const timestamp = new Date().toLocaleString();
      
      // Get form data for report
      const formData = new FormData(form);
      const inputs = {};
      for (const [key, value] of formData.entries()) {
        inputs[key] = value || 'N/A';
      }
      
      const report = `BOSTON HOUSE PRICE PREDICTION REPORT
Generated: ${timestamp}

PREDICTED PRICE: ${priceText}
Model Confidence: ${confidence}
Market Trend: ${trend}

INPUT PARAMETERS:
Crime Rate (CRIM): ${inputs.CRIM}
Zoning (ZN): ${inputs.ZN}
Industry (INDUS): ${inputs.INDUS}
Charles River (CHAS): ${inputs.CHAS}
Pollution (NOX): ${inputs.NOX}
Rooms (RM): ${inputs.RM}
Building Age (AGE): ${inputs.AGE}
Distance (DIS): ${inputs.DIS}
Highway Access (RAD): ${inputs.RAD}
Property Tax (TAX): ${inputs.TAX}
School Ratio (PTRATIO): ${inputs.PTRATIO}
Demographics (B): ${inputs.B}
Socioeconomic (LSTAT): ${inputs.LSTAT}

DISCLAIMER:
This is a demonstration using simplified machine learning models.
For actual real estate decisions, consult professional appraisers.

Generated by Boston House Price AI Predictor`;

      const blob = new Blob([report], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `house-price-prediction-${Date.now()}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      // Visual feedback
      const icon = downloadBtn.querySelector('i');
      const originalClass = icon.className;
      icon.className = 'fa-solid fa-check';
      downloadBtn.style.background = 'rgba(16,185,129,0.1)';
      
      setTimeout(() => {
        icon.className = originalClass;
        downloadBtn.style.background = '';
      }, 2000);
    });

    // Input validation and real-time feedback (simplified - no range restrictions)
    const inputs = form.querySelectorAll('input[type="number"], select');
    inputs.forEach(input => {
      input.addEventListener('input', (e) => {
        const value = e.target.value;
        const field = e.target.closest('.form-field');
        
        // Remove previous validation classes
        field.classList.remove('valid', 'invalid');
        
        // Only check if field has a value and is a valid number (no range restrictions)
        if (value) {
          if (e.target.type === 'number') {
            // For number inputs, just check if it's a valid number
            const numValue = parseFloat(value);
            if (!isNaN(numValue) && isFinite(numValue)) {
              field.classList.add('valid');
            } else {
              field.classList.add('invalid');
            }
          } else {
            // For select inputs, check if valid option is selected
            if (e.target.checkValidity()) {
              field.classList.add('valid');
            } else {
              field.classList.add('invalid');
            }
          }
        }
      });
      
      // Remove browser's built-in validation messages
      input.addEventListener('invalid', (e) => {
        e.preventDefault();
      });
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      // Ctrl/Cmd + Enter to predict
      if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
        e.preventDefault();
        form.dispatchEvent(new Event('submit', { bubbles: true }));
      }
      
      // Escape to reset
      if (e.key === 'Escape') {
        resetBtn.click();
      }
    });

    // Auto-save form data to prevent loss
    const autoSave = () => {
      const formData = new FormData(form);
      const data = {};
      for (const [key, value] of formData.entries()) {
        data[key] = value;
      }
      try {
        sessionStorage.setItem('bostonHousePrediction', JSON.stringify(data));
      } catch (e) {
        // Ignore storage errors
      }
    };

    const loadSaved = () => {
      try {
        const saved = sessionStorage.getItem('bostonHousePrediction');
        if (saved) {
          const data = JSON.parse(saved);
          Object.entries(data).forEach(([key, value]) => {
            const input = document.getElementById(key);
            if (input && value) {
              input.value = value;
            }
          });
        }
      } catch (e) {
        // Ignore storage errors
      }
    };

    // Load saved data on page load
    loadSaved();

    // Save data as user types
    inputs.forEach(input => {
      input.addEventListener('input', autoSave);
    });

    // Initialize with empty state
    showState('empty');

    // Add some nice micro-interactions
    const buttons = document.querySelectorAll('.btn, .icon-btn');
    buttons.forEach(btn => {
      btn.addEventListener('mousedown', () => {
        btn.style.transform = 'scale(0.98)';
      });
      
      btn.addEventListener('mouseup', () => {
        btn.style.transform = '';
      });
      
      btn.addEventListener('mouseleave', () => {
        btn.style.transform = '';
      });
    });

    // Form validation styles
    const style = document.createElement('style');
    style.textContent = `
      .form-field.valid .form-input {
        border-color: var(--success);
        background: rgba(16,185,129,0.05);
      }
      
      .form-field.invalid .form-input {
        border-color: var(--error);
        background: rgba(239,68,68,0.05);
      }
      
      .form-field.valid .form-input:focus {
        box-shadow: 0 0 0 3px rgba(16,185,129,0.1);
      }
      
      .form-field.invalid .form-input:focus {
        box-shadow: 0 0 0 3px rgba(239,68,68,0.1);
      }
      
      /* Enhanced mobile touch feedback */
      @media (max-width: 768px) {
        .btn:active, .icon-btn:active {
          transform: scale(0.95);
        }
        
        .form-input:focus {
          transform: none;
          font-size: 16px; /* Prevents zoom on iOS */
        }
        
        /* Larger touch targets on mobile */
        .btn {
          min-height: 44px;
          padding: 14px 24px;
        }
        
        .icon-btn {
          width: 44px;
          height: 44px;
        }
        
        .form-input {
          min-height: 44px;
          font-size: 16px;
        }
      }
      
      /* Dark mode enhancements */
      @media (prefers-color-scheme: dark) {
        :root {
          --bg-primary: #000000;
          --bg-secondary: #0a0a0a;
        }
      }
      
      /* Reduced motion for accessibility */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    `;
    document.head.appendChild(style);

  </script>
</body>
</html>